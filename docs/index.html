<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CJA API R Client • cjar</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="CJA API R Client">
<meta property="og:description" content="Connect to the CJA API, which powers CJA Workspace. The package was developed with the analyst in mind and will continue to be developed with the guiding principles of iterative, repeatable, timely analysis. New features are actively being developed and we value your feedback and contribution to the process. ">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">cjar</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9007</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="cjar" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#cjar" class="anchor"></a>cjar</h1></div>
<!-- badges: start -->

<!-- <img src="man/figures/logo.png" align="right" width = "200"/> -->
<div id="an-r-client-for-cja-api" class="section level2">
<h2 class="hasAnchor">
<a href="#an-r-client-for-cja-api" class="anchor"></a>An R Client for CJA API</h2>
<p>Connect to the CJA API, which powers CJA Workspace. The package was developed with the analyst in mind and will continue to be developed with the guiding principles of iterative, repeatable, timely analysis. New features are actively being developed and we value your feedback and contribution to the process. Please submit bugs, questions, and enhancement requests as <a href="https://github.com/searchdiscovery/cjar/issues">issues in this Github repository</a>.</p>
<!-- ### Install the package (recommended) -->
<!-- ``` -->
<!-- # Install from CRAN -->
<!-- install.packages('adobeanalyticsr') -->
<!-- # Load the package -->
<!-- library(adobeanalyticsr)  -->
<!-- ``` -->
<div id="install-the-development-version-of-the-package" class="section level3">
<h3 class="hasAnchor">
<a href="#install-the-development-version-of-the-package" class="anchor"></a>Install the development version of the package</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install devtools from CRAN</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"devtools"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Install adobeanayticsr from github</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">'searchdiscovery/cjar'</span>) </span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the package</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cjar) </span></code></pre></div>
</div>
<div id="current-setup-process-overview" class="section level3">
<h3 class="hasAnchor">
<a href="#current-setup-process-overview" class="anchor"></a>Current setup process overview</h3>
<p>There are four setup steps required to start accessing your Customer Journey Analytics data. The following steps are each outlined in greater detail in the following sections:</p>
<ol>
<li>Create an Adobe Console API Project</li>
<li>Create and add the JWT arguments to your <code>.Renviron</code> file.</li>
<li>Get your authorization token by using the function <code><a href="reference/cja_auth.html">cja_auth()</a></code>.</li>
<li>Get the <code>Data View ID</code> by using the function <code><a href="reference/cja_get_dataviews.html">cja_get_dataviews()</a></code>.</li>
</ol>
<div id="1-create-an-adobe-console-api-project" class="section level4">
<h4 class="hasAnchor">
<a href="#1-create-an-adobe-console-api-project" class="anchor"></a>1. Create an Adobe Console API Project</h4>
<p>When using JWT authentication, you only need an Adobe Console API project for each organization you are needing to access.</p>
<p>Once you are a developer for a CJA product profile, you can create an API client in the Adobe Developer Console.</p>
<ol>
<li>Navigate to console.adobe.io.</li>
<li>Check the organization name in the top right to make sure that you are logged in to the correct company.</li>
<li>Click Create new project.</li>
<li>Click Add API.</li>
<li>Click Customer Journey Analytics, then click Next.</li>
<li>Click Generate Keypair.</li>
<li>A config.zip file is automatically downloaded to your local machine. Keep this config folder in a secure location, as it contains your only copy of your private key. See steps … for what to do with the private.key file.</li>
<li>Click Next.</li>
<li>Select the desired product profiles for the service account. Make sure that it contains the right permissions to access the API. Click Save configured API.</li>
<li>Back on the project’s home page, click Add to project &gt; API.</li>
<li>Click Adobe Experience Platform, then click Next.</li>
<li>You already generated a keypair when creating the Adobe Analytics API, so you do not need to create another. Click Next.</li>
<li>Select the desired product profiles for the service account. Make sure that it contains the right permissions to access the API. Click Save configured API.</li>
<li>Copy and paste the Client ID, Client Secret (click “Retrieve client secret”), Technical Account ID, and Organization ID and paste them into a .Renviron file in the project or user directory.<br>
</li>
<li>Locate the config.zip file that automatically downloaded in step 6. Unzip the file and move the ‘private.zip’ file into your working directory. The location of this file will be needed as the value of the <strong>CJA_PRIVATE_KEY</strong> variable.</li>
</ol>
</div>
<div id="2-set-up-the-renviron-file" class="section level4">
<h4 class="hasAnchor">
<a href="#2-set-up-the-renviron-file" class="anchor"></a>2. Set up the .Renviron file</h4>
<p>This file is essential to keeping your information secure. It also speeds up analysis by limiting the number of arguments you need to add to every function call.</p>
<ol>
<li>If you do not have an <code>.Renviron</code> file (if you have never heard of this file you almost certainly don’t have one!), then create a new file and save it with the name <code>.Renviron</code>. You can do this from within the RStudio environment and save the file either in your <code>Home</code> directory (which is recommended; click on the <strong>Home</strong> button in the file navigator in RStudio and save it to that location) <em>or</em> within your project’s working directory.</li>
<li>Get the following variables from the CJA project and config.zip file and then add them to the file (see <em>Creating an Adobe Console API Project</em> above) The format of variables in the <code>.Renviron</code> file is straightforward.</li>
</ol>
<!-- --><div class="sourceCode" id="cb2"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="do">## JWT creds ##</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>CJA_CLIENT_ID<span class="ot">=</span>XXXXXXXXXXXXXXXXXXXX</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>CJA_CLIENT_SECRET<span class="ot">=</span>XXX<span class="sc">-</span>XXXXXXXXXXXXXXXXXXXXXXX</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>CJA_TECHNICAL_ID<span class="ot">=</span>XXXXXXXXXXXXXXXXXXXX<span class="sc">@</span>techacct.adobe.com</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>CJA_ORGANIZATION_ID<span class="ot">=</span>XXXXXXXXXXXXX<span class="sc">@</span>AdobeOrg</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>CJA_PRIVATE_KEY<span class="ot">=</span>private.key</span></code></pre></div>
<p>After adding all 5 variables to the <code>.Renviron</code> file and saving it, restart your R session (<strong>Session &gt; Restart R</strong> in RStudio) and reload <code>cjar</code> (<code><a href="https://rdrr.io/r/base/library.html">library(cjar)</a></code>).</p>
</div>
<div id="3-get-your-access-token" class="section level4">
<h4 class="hasAnchor">
<a href="#3-get-your-access-token" class="anchor"></a>3. Get your access token</h4>
<p>The token is actually a lonnnnng alphanumeric string that is the what ultimately enables you to access your data:</p>
<ol>
<li>In the console, enter <code>aw_auth()</code> and press <em>Enter</em>.</li>
<li>In the Console window you should see “Successfully authenticated with JWT: access token valid until ….”</li>
<li>If you do not see this message then go back and repeat the previous steps to make sure you did not miss something.</li>
</ol>
</div>
<div id="4-get-the-data-view-id" class="section level4">
<h4 class="hasAnchor">
<a href="#4-get-the-data-view-id" class="anchor"></a>4. Get the Data View ID</h4>
<p>All data in CJA is located in Data Views, similar to Report Suites in Adobe Analytics. Before pulling data it is advisable to locate the data view id of the data you are attempting to pull from.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Pull a list of available data views</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>dv <span class="ot">&lt;-</span> <span class="fu">cja_get_dataviews</span>(<span class="at">expansion =</span> <span class="fu">c</span>(<span class="st">'name'</span>, <span class="st">'description'</span>)) </span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co">#note: see function documentation for all availabe expansion metadata available.</span></span></code></pre></div>
<p>Once you have the data view ID you want then you can begin pulling data using the different functions.</p>
</div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Ben Woodard <br><small class="roles"> Author, maintainer </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://lifecycle.r-lib.org/articles/stages.html"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Ben Woodard.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
